<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capture a Energia - Jogo Interativo</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #87CEEB 0%, #98D8E8 50%, #B0E0E6 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animação das nuvens de fundo */
        .clouds {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .cloud {
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50px;
            opacity: 0.6;
            animation: float 20s infinite linear;
        }

        .cloud:before {
            content: '';
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50px;
        }

        .cloud1 {
            width: 80px;
            height: 40px;
            top: 20%;
            animation-duration: 25s;
        }

        .cloud1:before {
            width: 50px;
            height: 50px;
            top: -25px;
            left: 10px;
        }

        .cloud2 {
            width: 60px;
            height: 30px;
            top: 40%;
            animation-duration: 30s;
            animation-delay: -10s;
        }

        .cloud2:before {
            width: 40px;
            height: 40px;
            top: -20px;
            left: 15px;
        }

        @keyframes float {
            0% { transform: translateX(-100px); }
            100% { transform: translateX(calc(100vw + 100px)); }
        }

        /* Seção do jogo */
        #game {
            position: relative;
            z-index: 2;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .game-header {
            text-align: center;
            margin-bottom: 2rem;
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .game-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .game-subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 1.5rem;
        }

        /* Container do jogo */
        .game-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            height: 600px;
            margin: 0 auto;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8E8 100%);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            border: 3px solid #1e3c72;
        }

        /* HUD do jogo */
        .game-hud {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(30, 60, 114, 0.95);
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .score, .timer {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .progress-bar {
            flex: 1;
            margin: 0 2rem;
            height: 10px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #f6b93b, #ffd700);
            width: 100%;
            transition: width 1s linear;
        }

        /* Área de jogo */
        .game-area {
            position: absolute;
            top: 80px;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
        }

        /* Personagem jogador */
        .player {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 80px;
            transition: all 0.2s ease-out;
            z-index: 5;
        }

        .character {
            width: 100%;
            height: 100%;
            position: relative;
            animation: idle 2s ease-in-out infinite;
        }

        .character.happy {
            animation: celebrate 0.5s ease-out;
        }

        .character.sad {
            animation: shake 0.5s ease-out;
        }

        /* Corpo do bonequinho */
        .character-body {
            width: 50px;
            height: 60px;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            border-radius: 25px 25px 15px 15px;
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* Cabeça do bonequinho */
        .character-head {
            width: 40px;
            height: 40px;
            background: #fdbcb4;
            border-radius: 50%;
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        /* Olhos */
        .character-eyes {
            position: absolute;
            top: 12px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
        }

        .eye {
            width: 6px;
            height: 6px;
            background: #333;
            border-radius: 50%;
        }

        /* Boca */
        .character-mouth {
            position: absolute;
            top: 22px;
            left: 50%;
            transform: translateX(-50%);
            width: 12px;
            height: 6px;
            border: 2px solid #333;
            border-top: none;
            border-radius: 0 0 12px 12px;
        }

        /* Braços */
        .character-arms {
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            width: 70px;
            height: 20px;
        }

        .arm {
            width: 15px;
            height: 30px;
            background: #fdbcb4;
            border-radius: 10px;
            position: absolute;
            top: 0;
        }

        .arm.left {
            left: 0;
            transform: rotate(-20deg);
        }

        .arm.right {
            right: 0;
            transform: rotate(20deg);
        }

        /* Pernas */
        .character-legs {
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 20px;
        }

        .leg {
            width: 12px;
            height: 25px;
            background: #1e3c72;
            border-radius: 6px;
            position: absolute;
            bottom: 0;
        }

        .leg.left {
            left: 8px;
        }

        .leg.right {
            right: 8px;
        }

        /* Objetos que caem */
        .falling-object {
            position: absolute;
            font-size: 2.5rem;
            animation: fall linear;
            cursor: pointer;
            z-index: 3;
            filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.3));
        }

        /* Tela de game over */
        .game-over {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(30, 60, 114, 0.95);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            z-index: 20;
        }

        .game-over h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #f6b93b;
        }

        .final-score {
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }

        .energy-message {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            max-width: 80%;
        }

        .play-again-btn {
            background: linear-gradient(135deg, #f6b93b, #ffd700);
            color: #1e3c72;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .play-again-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        /* Controles para mobile - removidos */

        /* Animações */
        @keyframes idle {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        @keyframes celebrate {
            0% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(-5deg); }
            50% { transform: scale(1.1) rotate(5deg); }
            75% { transform: scale(1.1) rotate(-5deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes fall {
            from {
                transform: translateY(-100px);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            to {
                transform: translateY(600px);
                opacity: 1;
            }
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .game-title {
                font-size: 2rem;
            }

            .game-container {
                height: 500px;
                margin: 0 1rem;
            }



            .game-hud {
                padding: 0.5rem;
            }

            .score, .timer {
                font-size: 1.2rem;
            }

            .progress-bar {
                margin: 0 1rem;
            }

            .falling-object {
                font-size: 2rem;
            }

            .player {
                width: 60px;
                height: 60px;
            }
        }

        @media (max-width: 480px) {
            #game {
                padding: 1rem;
            }

            .game-header {
                padding: 1.5rem;
            }

            .game-title {
                font-size: 1.8rem;
            }

            .game-subtitle {
                font-size: 1rem;
            }

            .game-container {
                height: 450px;
            }


        }
    </style>
</head>
<body>
    <!-- Nuvens animadas de fundo -->
    <div class="clouds">
        <div class="cloud cloud1"></div>
        <div class="cloud cloud2"></div>
    </div>

    <!-- Seção do jogo -->
    <section id="game">
        <div class="game-header">
            <h1 class="game-title">⚡ Capture a Energia</h1>
            <p class="game-subtitle">Ajude nosso guardião a capturar energia limpa e evitar os poluentes!</p>
        </div>

        <div class="game-container">
            <!-- HUD do jogo -->
            <div class="game-hud">
                <div class="score">Pontos: <span id="score">0</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress"></div>
                </div>
                <div class="timer">Tempo: <span id="timer">60</span>s</div>
            </div>

            <!-- Área principal do jogo -->
            <div class="game-area" id="gameArea">
                <!-- Personagem jogador -->
                <div class="player" id="player">
                    <div class="character" id="character">
                        <div class="character-body">
                            <div class="character-head">
                                <div class="character-eyes">
                                    <div class="eye"></div>
                                    <div class="eye"></div>
                                </div>
                                <div class="character-mouth"></div>
                            </div>
                            <div class="character-arms">
                                <div class="arm left"></div>
                                <div class="arm right"></div>
                            </div>
                            <div class="character-legs">
                                <div class="leg left"></div>
                                <div class="leg right"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>



            <!-- Tela de game over -->
            <div class="game-over" id="gameOver">
                <h2>Jogo Finalizado!</h2>
                <div class="final-score">Pontuação Final: <span id="finalScore">0</span></div>
                <div class="energy-message" id="energyMessage"></div>
                <button class="play-again-btn" onclick="startGame()">🔄 Jogar Novamente</button>
            </div>
        </div>
    </section>

    <script>
        // Variáveis do jogo
        let gameState = {
            score: 0,
            timeLeft: 60,
            gameRunning: false,
            playerPosition: 50, // Posição em porcentagem
            gameInterval: null,
            spawnInterval: null,
            timerInterval: null
        };

        // Elementos DOM
        const player = document.getElementById('player');
        const character = document.getElementById('character');
        const gameArea = document.getElementById('gameArea');
        const scoreElement = document.getElementById('score');
        const timerElement = document.getElementById('timer');
        const progressElement = document.getElementById('progress');
        const gameOverScreen = document.getElementById('gameOver');
        const finalScoreElement = document.getElementById('finalScore');
        const energyMessageElement = document.getElementById('energyMessage');

        // Tipos de objetos que caem
        const fallingObjects = [
            { emoji: '☀️', type: 'clean', points: 1 },
            { emoji: '💨', type: 'clean', points: 1 },
            { emoji: '🛢️', type: 'pollutant', points: -1 },
            { emoji: '🔥', type: 'pollutant', points: -1 }
        ];

        // Sons do jogo (usando Web Audio API)
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        function playSound(frequency, duration, type = 'sine') {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = frequency;
            oscillator.type = type;
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }

        // Som de captura correta
        function playCorrectSound() {
            playSound(523, 0.2); // Dó
            setTimeout(() => playSound(659, 0.2), 100); // Mi
        }

        // Som de captura incorreta
        function playWrongSound() {
            playSound(200, 0.3, 'sawtooth');
        }

        // Inicializar o jogo
        function initGame() {
            updatePlayerPosition();
            setupEventListeners();
            startGame();
        }

        // Configurar event listeners
        function setupEventListeners() {
            // Controles de teclado
            document.addEventListener('keydown', handleKeyPress);
            


            // Touch controls suaves na área do jogo
            let touchStartX = 0;
            let isMoving = false;
            
            gameArea.addEventListener('touchstart', (e) => {
                touchStartX = e.touches[0].clientX;
                isMoving = true;
            });

            gameArea.addEventListener('touchmove', (e) => {
                e.preventDefault();
                if (!isMoving) return;
                
                const touchCurrentX = e.touches[0].clientX;
                const diff = touchCurrentX - touchStartX;
                
                // Movimento mais suave com menor threshold
                if (Math.abs(diff) > 10) {
                    if (diff > 0) {
                        movePlayer('right');
                    } else {
                        movePlayer('left');
                    }
                    touchStartX = touchCurrentX;
                }
            });

            gameArea.addEventListener('touchend', () => {
                isMoving = false;
            });
        }

        // Lidar com teclas pressionadas
        function handleKeyPress(event) {
            if (!gameState.gameRunning) return;
            
            switch(event.key) {
                case 'ArrowLeft':
                case 'a':
                case 'A':
                    event.preventDefault();
                    movePlayer('left');
                    break;
                case 'ArrowRight':
                case 'd':
                case 'D':
                    event.preventDefault();
                    movePlayer('right');
                    break;
            }
        }

        // Mover o jogador
        function movePlayer(direction) {
            if (!gameState.gameRunning) return;
            
            const moveAmount = 8;
            
            if (direction === 'left' && gameState.playerPosition > 10) {
                gameState.playerPosition -= moveAmount;
            } else if (direction === 'right' && gameState.playerPosition < 90) {
                gameState.playerPosition += moveAmount;
            }
            
            updatePlayerPosition();
        }

        // Atualizar posição visual do jogador
        function updatePlayerPosition() {
            player.style.left = gameState.playerPosition + '%';
        }

        // Iniciar o jogo
        function startGame() {
            // Resetar estado do jogo
            gameState.score = 0;
            gameState.timeLeft = 60;
            gameState.gameRunning = true;
            gameState.playerPosition = 50;
            
            // Limpar objetos existentes
            const existingObjects = gameArea.querySelectorAll('.falling-object');
            existingObjects.forEach(obj => obj.remove());
            
            // Resetar UI
            updateUI();
            gameOverScreen.style.display = 'none';
            updatePlayerPosition();
            
            // Iniciar intervalos do jogo
            startGameIntervals();
        }

        // Iniciar intervalos do jogo
        function startGameIntervals() {
            // Spawn de objetos (a cada 1.5 segundos)
            gameState.spawnInterval = setInterval(spawnFallingObject, 1500);
            
            // Timer do jogo (a cada segundo)
            gameState.timerInterval = setInterval(() => {
                gameState.timeLeft--;
                updateUI();
                
                if (gameState.timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
            
            // Loop principal do jogo (60 FPS)
            gameState.gameInterval = setInterval(updateGame, 16);
        }

        // Criar objeto que cai
        function spawnFallingObject() {
            if (!gameState.gameRunning) return;
            
            const objectData = fallingObjects[Math.floor(Math.random() * fallingObjects.length)];
            const object = document.createElement('div');
            
            object.className = 'falling-object';
            object.textContent = objectData.emoji;
            object.dataset.type = objectData.type;
            object.dataset.points = objectData.points;
            
            // Posição horizontal aleatória
            const randomX = Math.random() * 80 + 10; // Entre 10% e 90%
            object.style.left = randomX + '%';
            object.style.top = '-50px';
            
            // Duração da animação baseada na dificuldade
            const fallDuration = Math.max(3, 5 - (60 - gameState.timeLeft) * 0.05);
            object.style.animationDuration = fallDuration + 's';
            
            gameArea.appendChild(object);
        }

        // Loop principal do jogo
        function updateGame() {
            if (!gameState.gameRunning) return;
            
            const fallingObjects = gameArea.querySelectorAll('.falling-object');
            const playerRect = player.getBoundingClientRect();
            const gameAreaRect = gameArea.getBoundingClientRect();
            
            fallingObjects.forEach(obj => {
                const objRect = obj.getBoundingClientRect();
                
                // Verificar colisão
                if (checkCollision(playerRect, objRect)) {
                    handleCollision(obj);
                }
                
                // Remover objetos que saíram da tela
                if (objRect.top > gameAreaRect.bottom) {
                    obj.remove();
                }
            });
        }

        // Verificar colisão entre jogador e objeto
        function checkCollision(playerRect, objRect) {
            return !(playerRect.right < objRect.left || 
                    playerRect.left > objRect.right || 
                    playerRect.bottom < objRect.top || 
                    playerRect.top > objRect.bottom);
        }

        // Lidar com colisão
        function handleCollision(object) {
            const points = parseInt(object.dataset.points);
            const type = object.dataset.type;
            
            gameState.score += points;
            
            // Animação do personagem e som
            if (type === 'clean') {
                character.className = 'character happy';
                playCorrectSound();
            } else {
                character.className = 'character sad';
                playWrongSound();
            }
            
            // Resetar animação do personagem após um tempo
            setTimeout(() => {
                character.className = 'character';
            }, 500);
            
            // Remover objeto
            object.remove();
            
            // Atualizar UI
            updateUI();
        }

        // Atualizar interface do usuário
        function updateUI() {
            scoreElement.textContent = gameState.score;
            timerElement.textContent = gameState.timeLeft;
            
            // Atualizar barra de progresso
            const progressPercent = ((60 - gameState.timeLeft) / 60) * 100;
            progressElement.style.width = progressPercent + '%';
        }

        // Finalizar o jogo
        function endGame() {
            gameState.gameRunning = false;
            
            // Limpar intervalos
            clearInterval(gameState.gameInterval);
            clearInterval(gameState.spawnInterval);
            clearInterval(gameState.timerInterval);
            
            // Remover objetos restantes
            const remainingObjects = gameArea.querySelectorAll('.falling-object');
            remainingObjects.forEach(obj => obj.remove());
            
            // Mostrar tela de game over
            showGameOver();
        }

        // Mostrar tela de game over
        function showGameOver() {
            finalScoreElement.textContent = gameState.score;
            
            let message = `Você gerou ${Math.max(0, gameState.score)} kWh de energia limpa!`;
            
            if (gameState.score >= 20) {
                message += "\n🌟 Você é um verdadeiro Guardião da Energia Limpa! 🌟";
            } else if (gameState.score >= 10) {
                message += "\n⚡ Bom trabalho! Continue protegendo o meio ambiente!";
            } else if (gameState.score >= 0) {
                message += "\n🌱 Um bom começo! Tente capturar mais energia limpa!";
            } else {
                message += "\n🌍 Vamos tentar novamente? O planeta precisa da sua ajuda!";
            }
            
            energyMessageElement.textContent = message;
            gameOverScreen.style.display = 'flex';
        }

        // Inicializar o jogo quando a página carregar
        document.addEventListener('DOMContentLoaded', initGame);

        // Pausar/retomar o jogo quando a aba perde/ganha foco
        document.addEventListener('visibilitychange', () => {
            if (document.hidden && gameState.gameRunning) {
                // Pausar o jogo quando a aba não está visível
                clearInterval(gameState.gameInterval);
                clearInterval(gameState.spawnInterval);
                clearInterval(gameState.timerInterval);
            } else if (!document.hidden && gameState.gameRunning) {
                // Retomar o jogo quando a aba volta a ficar visível
                startGameIntervals();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96fa8f2bf051decb',t:'MTc1NTI4MDQ4OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
